USE TRAINING;
-- CONSTRAINT (UNIQUE CONSTRAINT)
CREATE TABLE UNIQUE_TABLE(
CUST_ID INT UNIQUE,
CUST_NAME VARCHAR(100),
AGE INT,
CITY VARCHAR(100)
);
 
 INSERT INTO UNIQUE_TABLE VALUES (1000,'MANAS',30,'MUMBAI'),(1001,'SAMIR',28,'PUNE'),(1002,'GAURAV',32,'THANE'),
 (1003,'CHETAN',25,'NAVI MUMBAI'),(1004,'AMIT',29,'PUNE'),(1005,'VARSHA',26,'LONAVALA'),(1006,'VAIDEHI',27,'MUMBAI');
 
 SELECT * FROM UNIQUE_TABLE;
 INSERT INTO UNIQUE_TABLE VALUES (1002,'ABHI',29,'PUNE');   -- ERROR SINCE DUPLCATE VALUE FOR CUST_ID AS UNIQUE CONSTRAINT
 
 CREATE TABLE COUNTRY(
 COUNTRYID INT,
 COUNTRYNAME VARCHAR(50) UNIQUE,
 PEOPLECOUNT INT
 );
 
 INSERT INTO COUNTRY VALUES (1,'INDIA',10000000),(2,'USA',200000),(3,'CHINA',110000000),(4,'JAPAN',2356894),(5,'NEPAL',100000),
 (6,'KOREA',123456),(7,'ITALY',520789),(8,'CHILE',279634),(9,'ENGLAND',524697),(10,'NEW ZEALAND',1567980);
 
 SELECT * FROM COUNTRY;
 
 INSERT INTO COUNTRY VALUES (10,'JAPAN',1523479); -- ERROR SINCE COUNTRYNAME IS UNIQUE COLUMN
 
 SET SQL_SAFE_UPDATES=0;
 
 UPDATE COUNTRY SET COUNTRYNAME='UNITED STATES' WHERE COUNTRYNAME='USA';
 SELECT * FROM COUNTRY;
 
 DELETE FROM COUNTRY WHERE COUNTRYNAME='CHINA';
 
 -- NOT NULL CONSTRAINT
 
CREATE TABLE NOTNULL(
CUSTID INT NOT NULL,
CUSTNAME VARCHAR(50) UNIQUE,
AGE INT,
CITY VARCHAR(50)
);

INSERT INTO NOTNULL VALUES (11,'RAHOUL',35,'PUNE'),(21,'RAKEYSHH',30,'MUMBAI'),(31,'SHUBHAM',29,'NASHIK'),
(41,'PRANIT',29,'PEN'),(51,'SAYALEE',32,'MUMBAI');

SELECT * FROM NOTNULL;
INSERT INTO NOTNULL (CUSTNAME,AGE,CITY) VALUES ('YOGESH',34,'MAHAD'); -- ERROR SINCE CUSTID IS NOT NULL CONSTRAINT
INSERT INTO NOTNULL VALUES (61,'RAHOUL',39,'KOLHAPUR'); -- ERROR SINCE CUSTNAME IS UNIQUE CONSTRAINT 

SELECT * FROM NOTNULL;

-- CHECK CONSTRAINT
CREATE TABLE CHECK_TABLE(
CUSTID INT UNIQUE NOT NULL,
CUSTNAME VARCHAR(50) NOT NULL,
AGE INT CHECK (AGE>0 AND AGE <=100),
CITY VARCHAR(50)
);

INSERT INTO CHECK_TABLE VALUES (111,'NEEL',25,'HYDERABAD'),(222,'AYUSHI',23,'INDORE'),(333,'SAMUAL',33,'NEW YORK'),
(444,'CLARIE',30,'AUSTRALIA'),(555,'GLENN',35,'WELLINGTON');

SELECT * FROM CHECK_TABLE;
INSERT INTO CHECK_TABLE VALUES (666,'NIVA',-5,'PUNE'); -- ERROR SINCE CHECK CONSTRAINT FOR AGE COLUMN
INSERT INTO CHECK_TABLE (CUSTNAME,AGE,CITY) VALUES ('RAKEYSHH',30,'KOLHAPUR');  -- ERROR SINCE NOT NULL CONSTRAINT FOR CUSTID COLUMN
INSERT INTO CHECK_TABLE VALUES(777,'PRIYA',105,'GOKAK');  -- ERROR SINCE CHECK CONSTRAINT FOR AGE COLUMN

-- DEFAULT CONSTRAINT
CREATE TABLE DEFAULT_TABLE(
CUSTID INT NOT NULL UNIQUE,
CUSTNAME VARCHAR(50) UNIQUE,
AGE INT CHECK (AGE>22 AND AGE<=40),
CITY VARCHAR(50) DEFAULT 'PUNE'
);

INSERT INTO DEFAULT_TABLE VALUES (1,'RAKEYSHH',30,'PUNE'),(2,'DANIEL',35,'KOLKATA'),(3,'BEN',37,'NEW YORK'),
(4,'RICKY',40,'SYDNEY'),(5,'STEVE',35,'HOBART');

SELECT * FROM DEFAULT_TABLE;
INSERT INTO DEFAULT_TABLE (CUSTID,CUSTNAME,AGE) VALUES (6,'SAM',39);
INSERT INTO DEFAULT_TABLE VALUES (7,'SAMIR',42,'PUNE'); -- ERROR SINCE CHECK CONSTRAINT VIOLATED
SELECT * FROM DEFAULT_TABLE;

-- PRIMARY KEY CONSTRAINT--(ALLOWS UNIQUE+NOT NULL VALUES)

CREATE TABLE PK_TABLE(
CUSTID INT PRIMARY KEY,
CUSTNAME VARCHAR(50),
AGE INT CHECK (AGE>20 AND AGE<=60),
CITY VARCHAR(50) DEFAULT 'MUMBAI',
MOBILE VARCHAR(50) UNIQUE
);

INSERT INTO PK_TABLE VALUES (100,'DIVYA',25,'PALGHAR','9860149725'),(101,'RIYA',30,'CHIPLUN','9987561256'),
(102,'SAMUEL',35,'GOA','7761982645'),(103,'DEV',45,'PIMPARI','7946132580'),(104,'MAAN',50,'SATARA','8796154230');

SELECT * FROM PK_TABLE;
INSERT INTO PK_TABLE VALUES (100,'MANDAR',55,'KAGAL',9975961542); -- ERROR SINCE CUSTID HAVE PRIMARY KEY CONSTRAINT
INSERT INTO PK_TABLE VALUES(105,'DANIAL',62,'PUNE',8520136974); -- ERROR SINCE CHECK CONSTRAINT VIOLATED FOR AGE COLUMN
SELECT * FROM PK_TABLE;

-- COMPOSITE PRIMARY KEY
CREATE TABLE PK_TABLE_COMP(
CUSTID INT,
CUSTNAME VARCHAR(50) NOT NULL,
AGE INT CHECK(AGE>20 AND AGE<=60),
CITY VARCHAR(50),
MOBILE VARCHAR(50) UNIQUE,
PRIMARY KEY (CUSTID,CUSTNAME)
);
 
INSERT INTO PK_TABLE_COMP VALUES (123,'RK',25,'PUNE','7761048975'),(124,'RM',29,'KOLHAPUR','9876541023'),
(125,'MJ',35,'SATARA','9975214860'),(126,'PM',32,'KOP','9012365478'),(127,'SM',39,'GAD','9324687510');

SELECT * FROM PK_TABLE_COMP;

INSERT INTO PK_TABLE_COMP VALUES(125,'RS',39,'MUM','6210357894');
INSERT INTO PK_TABLE_COMP VALUES(123,'RK',39,'MUM','6210357895'); -- ERROR SINCE PRIMARY KEY CONSTRAINT DUPLICATE values
INSERT INTO PK_TABLE_COMP VALUES(124,'EXN',37,'GAD','8745632190');

SELECT * FROM PK_TABLE_COMP;

-- FOREIGN KEY CONSTRAINT
CREATE TABLE CUSTOMER(
CUSTID INT PRIMARY KEY,
CUSTNAME VARCHAR(50) NOT NULL,
CITY VARCHAR(50) DEFAULT 'PUNE'
); 

CREATE TABLE ORDERS(
ORD_ID INT PRIMARY KEY,
CUSTID INT,
PRODNAME VARCHAR(50), 
AMOUNT INT,
CONSTRAINT FK_ORDERS FOREIGN KEY (CUSTID) REFERENCES CUSTOMER(CUSTID)
);

INSERT INTO CUSTOMER VALUES (1000,'RK','PUNE'),(1001,'SK','GADHINGLAJ'),(1002,'SN','KOLHAPUR'),(1003,'SM','BELGAUM'),
(1004,'AM','PUNE');
SELECT * FROM CUSTOMER;

INSERT INTO ORDERS VALUES(1,1000,'TV',15000),(2,1001,'AC',25000),(3,1002,'FRIDGE',22000),(4,1003,'CAR',500000),
(5,1004,'BIKE',75000);

INSERT INTO ORDERS VALUES(6,1005,'CAMERA',60000); -- ERROR SINCE CANNOT UPDATE CHILD ROW DUE TO FOREIGN KEY CONSTRAINT

DELETE FROM CUSTOMER WHERE CUSTID=1000; -- ERROR SINCE CANNOT DELETE OR UPDATE PARENT ROW DUE TO FOREIGN KEY CONSTRAINT

DELETE FROM ORDERS WHERE ORD_ID=1;
SELECT * FROM ORDERS;

